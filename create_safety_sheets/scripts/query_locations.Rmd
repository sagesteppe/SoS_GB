---
title: "Query locations for crews"
author: "steppe"
date: "2023-04-25"
output: html_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(message  = FALSE)
knitr::opts_chunk$set(warning = FALSE)
```




```{r loab libraries}
library(googleway)
library(tidyverse)
library(sf)
library(tigris)
```

```{r}
source('functions.R')
SoS_gkey = Sys.getenv("Sos_gkey")
```


```{r gather all places and there locations}

nvp <- places(state = c('OR', 'NV', 'UT')) |>
  dplyr::select(NAME)
```

```{r gather location data for each field crew}

locations <- c(
  'hospital', 'police_station',  # serious emergency
  'car_repair', 'gas_station', # emergency
  'lodging',  'library'# ReEmergency 
)

NE <- c('Ely', 'Elko', 'Austin', 'Tonopah')
SE <- c('Cedar City', 'Fillmore', 'Caliente')
SW <- c('Tonopah', 'Austin', 'Fallon', 'Bishop')
NW <- c('Burns', 'Andrews', 'Vale', 'Hiko')

ne_areas <- services_fn(location_type = locations[1], dist = 400000, # in meters ~250 miles 
                    search_cities = NE, places_sf = nvp)

r <- google_places(place_type = 'gas_station', location=c(39.26, -114.8), rankby = 'distance', key = SoS_gkey)

```

```{r gather results for the crews and save locally before formatting}


```


```{r}
repair <- google_places(search_string = 'auto_repair', keyword = 'name',
              location=c(43.594, -119.044),  rankby = 'distance',  key=key)
```


