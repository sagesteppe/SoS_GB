---
title: "Query locations for crews"
author: "steppe"
date: "2023-04-25"
output: html_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(message  = FALSE)
knitr::opts_chunk$set(warning = FALSE)
```




```{r loab libraries}
library(googleway)
library(tidyverse)
library(sf)
library(tigris)
```

```{r}
source('functions.R')
SoS_gkey = Sys.getenv("Sos_gkey")
```


```{r gather all places and there locations}

nvp <- places(state = c('OR', 'NV', 'UT')) |>
  dplyr::select(NAME)
```

```{r gather location data for each field crew}

locations <- c(
  'hospital', 'police_station',  # serious emergency
  'car_repair', 'gas_station', # emergency
  'lodging',  'library', 'supermarket' # ReEmergency 
)

NE <- c('Ely', 'Elko', 'Austin', 'Tonopah')
SE <- c('Cedar City', 'Fillmore', 'Caliente')
SW <- c('Tonopah', 'Austin', 'Fallon', 'Bishop')
NW <- c('Burns', 'Andrews', 'Vale', 'Hiko')

test <- services_fn(location_type = locations, 
                    search_cities = c('Elko', 'Ely'), places_sf = nvp)

# now ensure areas of interest are within ~50 miles of field office boundaries

```

```{r}

search_cities <- c(
  
  'Burns', 
  'Vale', 
  
  'Elko', 
  'Ely', 
  'Caliente',
  'Eureka',
  
  'Tonopah', 
  'Austin',
  'Fallon', 
  
  
)

```


```{r}
repair <- google_places(search_string = 'auto_repair', keyword = 'name',
              location=c(43.594, -119.044),  rankby = 'distance',  key=key)
```


